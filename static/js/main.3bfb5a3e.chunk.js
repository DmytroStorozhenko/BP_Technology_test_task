(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{15:function(e,t,n){e.exports={all_img_container:"allImages_all_img_container__2KjoX",img_item:"allImages_img_item__3tuuz"}},17:function(e,t,n){e.exports={line:"footer_line__3UVUF",copyright:"footer_copyright__LjXTy"}},2:function(e,t,n){e.exports={modal_container:"imgModalWindow_modal_container__32T4h",modal:"imgModalWindow_modal__2mx8H",img:"imgModalWindow_img__OH-UK",comments_block:"imgModalWindow_comments_block__1P1Ll",comment_item:"imgModalWindow_comment_item__29anD",name:"imgModalWindow_name__AUeFq",description:"imgModalWindow_description__2wfeT",btn_close:"imgModalWindow_btn_close__2hU8n",form_container:"imgModalWindow_form_container__3ER8z",form:"imgModalWindow_form__10pSf",form_input:"imgModalWindow_form_input__3UUL3",form_btn:"imgModalWindow_form_btn__2MgGb"}},26:function(e,t,n){e.exports={heading:"header_heading__18ntT"}},33:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(10),i=n.n(c),r=(n(33),n(6)),s=n(8),o=n.n(s),m=n(26),l=n.n(m),d=n(1),u=function(){return Object(d.jsx)("div",{className:l.a.heading,children:Object(d.jsx)("h2",{children:"Test app"})})},j=n(15),_=n.n(j),b=n(5),p=n(7),f=n.n(p),g=n(9),O=n(4),h=n(27),v=n.n(h).a.create({baseURL:" https://tzfrontend.herokuapp.com/"}),x=function(){return v.get("images/")},M=function(e){return v.get("images/".concat(e,"/"))},w=function(e){return v.get("comments/".concat(e,"/"))},N=function(e){return v.post("comments/add/",e)},y={images:[]},k={src:"",comments:[]},S=function(e){return function(){var t=Object(g.a)(f.a.mark((function t(n){var a,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M(e);case 3:return a=t.sent,t.next=6,w(e);case 6:c=t.sent,n((i=a.data.src,r=c.data,{type:"SET-MODAL-IMG",srs:i,comments:r}));case 8:return t.prev=8,t.finish(8);case 10:case"end":return t.stop()}var i,r}),t,null,[[0,,8,10]])})));return function(e){return t.apply(this,arguments)}}()},I=n(2),T=n.n(I),W=n(11);function C(e){var t={};return e.name?e.name.length>100&&(t.name="Name length must not exceed 100 characters"):t.name="Name is required",e.description||(t.description="Description is required"),t}var E=n.p+"static/media/close_btn.63feaaed.svg",L=function(e){var t=Object(b.b)(),n=Object(b.c)((function(e){return e.imgModalWindow})),c=n.comments,i=n.src;Object(a.useEffect)((function(){t(S(e.image_id))}),[]);var s=function(e,t){var n=Object(a.useState)({}),c=Object(r.a)(n,2),i=c[0],s=c[1],o=Object(a.useState)({}),m=Object(r.a)(o,2),l=m[0],d=m[1],u=Object(a.useState)(!1),j=Object(r.a)(u,2),_=j[0],b=j[1];return Object(a.useEffect)((function(){0===Object.keys(l).length&&_&&e()}),[l]),{handleChange:function(e){e.persist(),s((function(t){return Object(O.a)(Object(O.a)({},t),{},Object(W.a)({},e.target.name,e.target.value))}))},handleSubmit:function(e){e&&e.preventDefault(),d(t(i)),b(!0),s({})},values:i,errors:l}}((function(){var n;t((n={name:o.name,description:o.description,image_id:e.image_id},function(){var e=Object(g.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(n);case 3:a=e.sent,t({type:"ADD-COMMENT",comment:a.data});case 5:return e.prev=5,e.finish(5);case 7:case"end":return e.stop()}}),e,null,[[0,,5,7]])})));return function(t){return e.apply(this,arguments)}}())),t(S(e.image_id))}),C),o=s.values,m=s.errors,l=s.handleChange,u=s.handleSubmit;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:T.a.modal_container,children:Object(d.jsxs)("div",{className:T.a.modal,children:[Object(d.jsx)("button",{className:T.a.btn_close,onClick:e.closeHandler,children:Object(d.jsx)("img",{src:E,alt:"close_btn"})}),Object(d.jsx)("div",{className:T.a.img,children:Object(d.jsx)("img",{src:i,alt:"big_img"})}),Object(d.jsx)("div",{className:T.a.comments_block,children:c.length>0?c.map((function(e){return Object(d.jsxs)("div",{className:T.a.comment_item,children:[Object(d.jsx)("div",{className:T.a.name,children:e.name}),Object(d.jsx)("div",{className:T.a.comment,children:e.description})]},e.image_id)})):Object(d.jsx)("div",{children:"This image is without comments"})}),Object(d.jsx)("div",{className:T.a.form_container,children:Object(d.jsxs)("form",{onSubmit:u,noValidate:!0,className:T.a.form,children:[Object(d.jsx)("input",{className:T.a.form_input,type:"text",name:"name",value:o.name||"",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",onChange:l,autoComplete:"off"}),m.name&&Object(d.jsx)("div",{className:T.a.invalid_value,children:m.name}),Object(d.jsx)("input",{className:T.a.form_input,type:"text",name:"description",value:o.description||"",placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:l,autoComplete:"off"}),m.description&&Object(d.jsx)("div",{className:T.a.invalid_value,children:m.description}),Object(d.jsx)("button",{className:T.a.form_btn,type:"submit",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})]})})]})})})},D=function(e){var t=Object(b.c)((function(e){return e.allImg})),n=Object(b.b)(),c=Object(a.useState)(0),i=Object(r.a)(c,2),s=i[0],o=i[1];Object(a.useEffect)((function(){n(function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x();case 3:n=e.sent,t({type:"SET-ALL-IMG",images:n.data});case 5:return e.prev=5,e.finish(5);case 7:case"end":return e.stop()}}),e,null,[[0,,5,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:_.a.all_img_container,children:[t.images.map((function(t){return Object(d.jsx)("div",{onClick:function(){return n=t.image_id,e.setIsModalOpen(),void o(n);var n},className:_.a.img_item,children:Object(d.jsx)("img",{src:t.src,alt:"small_img"})},t.image_id)})),e.isModalOpen&&Object(d.jsx)("div",{children:Object(d.jsx)(L,{image_id:s,closeHandler:e.setIsModalOpen})})]})})},F=n(17),U=n.n(F),A=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("footer",{children:[Object(d.jsx)("div",{className:U.a.line}),Object(d.jsx)("div",{className:U.a.copyright,children:"\xa9 2018-2019"})]})})};var G=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(d.jsxs)("div",{className:o.a.app,children:[Object(d.jsxs)("div",{className:o.a.content,children:[Object(d.jsx)(u,{}),Object(d.jsx)(D,{isModalOpen:n,setIsModalOpen:function(){c(!n)}})]}),Object(d.jsx)(A,{}),n&&Object(d.jsx)("div",{className:o.a.modal_block})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},q=n(12),z=n(28),P=Object(q.b)({allImg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-ALL-IMG":return Object(O.a)(Object(O.a)({},e),{},{images:t.images});default:return e}},imgModalWindow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-MODAL-IMG":return Object(O.a)(Object(O.a)({},e),{},{src:t.srs,comments:t.comments});case"ADD-COMMENT":return Object(O.a)(Object(O.a)({},e),{},{comments:e.comments.push(t.comment)});default:return e}}}),B=Object(q.c)(P,Object(q.a)(z.a));window.store=B,i.a.render(Object(d.jsx)(b.a,{store:B,children:Object(d.jsx)(G,{})}),document.getElementById("root")),H()},8:function(e,t,n){e.exports={app:"app_app___EGI3",content:"app_content__1SDmu",modal_block:"app_modal_block__3oSkm"}}},[[58,1,2]]]);
//# sourceMappingURL=main.3bfb5a3e.chunk.js.map